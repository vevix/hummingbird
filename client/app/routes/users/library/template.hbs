<div class="row">
  <div class="columns">
    <div class="library-list columns">
      <div class="nav-wrapper">
        {{! @TODO: Implement switching status }}
        <button type="button" class="dropdown button" data-toggle="media-dropdown">
          {{t "users.library.library" type=(t (concat "media." media ".name"))}}
        </button>
        {{#zf-dropdown id="media-dropdown"}}
          {{#each mediaList as |_media|}}
            <li>
              <a {{action (route-action "updateMedia" _media)}}>
                 {{t "users.library.library" type=(t (concat "media." _media ".name"))}}
              </a>
            </li>
          {{/each}}
        {{/zf-dropdown}}

        {{! Library Status Selector }}
        <ul class="menu">
          {{#each statuses as |_status|}}
            {{users/components/library-select
              status=_status
              mediaType=media
              isActive=(eq _status status)
              isLoading=isLoading
              onClick=(action (mut status))
            }}
          {{/each}}
        </ul>
      </div>

      {{! Filtering }}
      {{! @TODO: Requires the API to be searchable }}
      <div class="search-library">
        {{one-way-input
          class="search-input"
          placeholder=(t "users.library.search")}}
      </div>

      {{! Entries }}
      {{#if isLoading}}
        {{! @TODO: update }}
        <p>Loading...</p>
      {{else}}
        {{#if entries}}
          {{#if (eq status 'all')}}
            {{! all status is selected }}
            {{#each-in sections as |status entries|}}
              {{#if entries}}
                {{users/components/library-entries
                  status=status
                  entries=entries
                  mediaType=media
                }}
              {{/if}}
            {{/each-in}}
          {{else}}
            {{! active tab entries }}
            {{users/components/library-entries
              status=status
              entries=filteredEntries
              mediaType=media
            }}
          {{/if}}

          {{! pagination }}
          {{paginator-infinite
            model=entries
            update=(route-action "newRecords")
            tolerance=(hash top=0 left=0 bottom=100 right=0)
          }}
        {{else}}
          {{! @TODO: update }}
          <p>No entries found.</p>
        {{/if}}
      {{/if}}
    </div>
  </div>
</div>